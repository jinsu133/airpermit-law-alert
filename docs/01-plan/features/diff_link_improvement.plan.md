# 법령/의안 상세 변경내용(Diff) 링크 개선 계획

## 1. 개요 (Overview)
현재 '보기' 버튼은 단순히 해당 법령이나 의안의 **기본 상세 페이지**로 연결됩니다.
사용자는 **"무엇이 변경되었는지"**를 바로 확인하기를 원하므로, 단순 페이지 이동이 아닌 **신구조문대비표(법령)** 또는 **주요내용/제안이유(의안)** 등 실질적인 변경 사항을 확인할 수 있는 UX로 개선이 필요합니다.

## 2. 현황 분석 (Current Status/Gap)
| 구분 | 현재 동작 | 사용자 기대 사항 (To-Be) |
| :--- | :--- | :--- |
| **법령/고시** | `law.go.kr/법령/{법령명}` (최신 공포 법령 본문) | **신구법비교표** 또는 **개정문** 페이지로 직결 |
| **의안** | `likms.assembly.go.kr/.../billDetail?billId={ID}` (의안 개요 페이지) | **주요 내용(요약)** 텍스트 확인 또는 **의안 원문(HWP/PDF)** 뷰어 |

## 3. 상세 전략 (Detailed Strategy)

### A. 법령/고시 (국가법령정보센터)
국가법령정보센터(OpenAPI/DRF)는 법령의 특정 "공포(제개정) 모드" 링크를 제공하는 패턴이 있습니다.

1.  **개정문/신구조문대비표 링크 패턴 조사**:
    - `https://www.law.go.kr/법령/{법령명}/{공포번호}/{공포일자}` 형식 지원 여부 확인.
    - 또는 `lsInfoP.do` 파라미터(efYd, nwYd 등)를 조합하여 **"연혁"** 탭의 특정 시점 비교 페이지로 보낼 수 있는지 확인.
    - 불가능할 경우: API에서 `신구조문대비표` URL을 별도로 주는지(`AttachLink` 등) 확인.

### B. 의안 (국회 의안정보시스템)
의안 상세 페이지(`billDetail.do`)는 너무 포괄적입니다.

1.  **주요내용 추출**:
    - OpenAPI 응답(`TVBPMBILL11`)에 `SUMMARY`(주요내용) 필드가 있는지 확인.
    - 있다면: 링크 이동 대신 **"요약 보기" 모달**을 띄워 텍스트로 바로 보여주는 것이 가장 빠르고 직관적임.
2.  **원문 파일 링크**:
    - `LINK_URL`(의안 원문 파일)이 제공되는지 확인.
    - 제공된다면: '원문 보기' 버튼을 추가하여 PDF/HWP를 바로 열도록 유도.

## 4. 실행 계획 (Action Plan)

### 단계 1: 데이터 검증 (Verification)
- `scripts/law_notifier.py`를 사용하여 현재 수집 중인 API 원본 데이터(`law_search`, `bill_items`)를 덤프해봅니다.
- **법령:** `공포번호`, `공포일자` 외에 `LinkID`나 `개정문링크`가 있는지 확인.
- **의안:** `주요내용(Summary)` 텍스트가 데이터에 포함되어 있는지 확인.

### 단계 2: 링크 생성 로직 개선 (Backend Fix)
- **법령:** 단순 법령명 검색 링크 -> **"공포일자+공포번호"** 기반의 구체적 제/개정 링크로 변경.
- **의안:** API에 요약문이 있다면 JSON 데이터에 포함. (`summary` 필드 추가)

### 단계 3: 프론트엔드 개선 (Frontend Fix)
- **법령:** 버튼 명칭을 '신구법비교' 등으로 변경 고려 (링크가 정확하다면).
- **의안:** 데이터에 `summary`가 있으면 링크 이동 대신, **"카드 확장"** 또는 **"모달"**로 주요 내용을 텍스트로 표시. (모바일 친화적)

## 5. 예상 결과
- 사용자는 법령 클릭 시 바로 **"빨간 글씨(개정된 부분)"**를 볼 수 있음.
- 사용자는 의안 클릭 시 페이지 이동 없이 **"왜 발의했는지, 주요 골자가 뭔지"** 즉시 읽을 수 있음.
